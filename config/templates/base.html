{% load static %}
<!DOCTYPE html>
<html lang="ru">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>
         {% block title %}Каталог деталей{% endblock %}
      </title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet" />
      {% block extra_css %}
         <link rel="stylesheet" href="{% static 'catalog/css/styles.css' %}" />
      {% endblock %}
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
            rel="stylesheet">
      <link rel="shortcut icon"
            href="{% static 'config/images/favicon.ico' %}"
            type="image/x-icon">
   </head>
   <body>
      {% include "includes/header.html" %}
      {% if messages %}
         <div class="toast-container position-fixed top-0 end-0 p-3"
              style="z-index: 1055">
            {% for message in messages %}
               <div class="toast align-items-center text-white {% if message.tags == 'success' %}bg-success{% else %}bg-danger{% endif %} border-0 fade-out-toast"
                    role="alert"
                    aria-live="assertive"
                    aria-atomic="true"
                    data-bs-autohide="true"
                    data-bs-delay="3000">
                  <div class="d-flex">
                     <div class="toast-body">{{ message }}</div>
                     <button type="button"
                             class="btn-close btn-close-white me-2 m-auto"
                             data-bs-dismiss="toast"
                             aria-label="Close"></button>
                  </div>
               </div>
            {% endfor %}
         </div>
      {% endif %}
      <div class="container mt-4">
         {% block content %}{% endblock %}
      </div>
      {% include "includes/footer.html" %}
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <script>
        // Инициализация toast
        function initToasts() {
            const toasts = document.querySelectorAll('.toast');
            toasts.forEach(toast => {
                if (!toast.classList.contains('toast-initialized')) {
                    const bsToast = new bootstrap.Toast(toast, {
                        animation: false,
                        autohide: true,
                        delay: 3000
                    });
                    toast.classList.add('toast-initialized');
                    bsToast.show();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            initToasts();
        });
      </script>
   </body>
</html>
